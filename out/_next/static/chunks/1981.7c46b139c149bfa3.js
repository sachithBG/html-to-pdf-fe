"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1981],{61981:(e,n,l)=>{l.r(n),l.d(n,{default:()=>k});var a=l(95155),s=l(12115),t=l(43655),i=l(9561),d=l(39905),r=l(26603),o=l(96854),c=l(45704),u=l(68998),h=l(72926),A=l(894),m=l(78416),x=l(36417),j=l(27753),g=l(26214),p=l(66365),f=l(10897),y=l(79545),v=l(450),C=l(84778),z=l(83391),b=l(90917);let k=()=>{let[e,n]=(0,s.useState)([]),[l,k]=(0,s.useState)({id:null,name:""}),[N,w]=(0,s.useState)(!1),[S,_]=(0,s.useState)(null),[E,D]=(0,s.useState)({}),[B,I]=(0,s.useState)(null),[T,U]=(0,s.useState)(!1),[Z,q]=(0,s.useState)(null),[H,J]=(0,s.useState)(!1),{token:M}=(0,z.d4)(e=>e.session),O=(0,z.d4)(e=>(0,b.x5)(e.organization)),W=(0,s.useCallback)(async()=>{w(!0);try{let e=await (0,C.ip)(O.id,M);200==e.status&&n(()=>e.data)}catch(e){console.error(e),_("Error fetching addons.")}finally{w(!1)}},[null==O?void 0:O.id]);(0,s.useEffect)(()=>{(null==O?void 0:O.id)&&W()},[W,null==O?void 0:O.id]);let $=async()=>{if(!l.name){D({addonName:"Addon name is required."});return}if(!l.name.match(/^[A-Z_]+$/)){D({addonName:"Addon name must be in capital letters and underscores only"});return}J(!0);try{if(l.id){let e=await (0,C.ij)(l,M);200==e.status&&(n(e=>e.map(e=>e.id===l.id?{...e,name:l.name}:e)),I("Addon updated successfully."))}else{let e=await (0,C.JI)(l.name,(null==O?void 0:O.id)||0,M);(200==e.status||201==e.status)&&(n(e=>[...e,{id:l.id,name:l.name,organization_id:O.id}]),I("Addon created successfully."))}k({id:null,name:""})}catch(e){console.error(e),_("Error creating addon.")}finally{J(!1)}},F=async()=>{if(Z){J(!0);try{let l=await (0,C._y)(Z.id,M);204==l.status&&n(e.filter(e=>e.id!==Z.id)),I("Addon deleted successfully."),U(!1)}catch(e){_("Error deleting addon."),console.log(e)}finally{J(!1)}}},G=async e=>{k(e),D({addonName:void 0}),I(null)};return(0,a.jsxs)(t.A,{container:!0,children:[(0,a.jsx)(i.A,{variant:"h5",gutterBottom:!0,children:"Manage Addons"}),(0,a.jsxs)(t.A,{size:{xs:12},sx:{marginBottom:3},children:[(0,a.jsx)(d.A,{margin:"dense",label:"Addon Name",fullWidth:!0,value:l.name,size:"small",onChange:e=>{let n=e.target.value.toUpperCase().replace(/[^A-Z_]/g,"_");k(e=>({...e,name:n})),D({addonName:void 0}),I(null)},error:!!E.addonName,helperText:E.addonName}),(0,a.jsx)(r.A,{variant:"outlined",onClick:$,disabled:H,startIcon:H&&(0,a.jsx)(o.A,{size:20}),sx:{marginTop:2,float:"right"},size:"small",children:H?"Creating...":l.id?"Update":"Create Addon"})]}),(0,a.jsx)(t.A,{size:{xs:12},sx:{marginBottom:3},children:N?(0,a.jsx)(c.A,{variant:"rectangular",width:"100%",height:300}):0===e.length?(0,a.jsx)(i.A,{children:"No addons available."}):null==e?void 0:e.map(e=>(0,a.jsxs)(u.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:1,borderBottom:"1px solid #ccc"},children:[(0,a.jsx)(i.A,{children:e.name}),(0,a.jsxs)(u.A,{children:[(0,a.jsx)(h.A,{title:"Edit",children:(0,a.jsx)(A.A,{onClick:()=>G(e),size:"small",children:(0,a.jsx)(y.A,{})})}),(0,a.jsx)(h.A,{title:"Delete",children:(0,a.jsx)(A.A,{onClick:()=>{q(e),U(!0)},children:(0,a.jsx)(v.A,{})})})]})]},e.id))}),(0,a.jsxs)(m.A,{open:T,onClose:()=>U(!1),children:[(0,a.jsx)(x.A,{children:"Delete Addon"}),(0,a.jsx)(j.A,{children:(0,a.jsx)(i.A,{children:"Are you sure you want to delete this addon?"})}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(r.A,{variant:"outlined",onClick:()=>U(!1),disabled:H,size:"small",children:"Cancel"}),(0,a.jsx)(r.A,{onClick:F,color:"error",variant:"outlined",disabled:H,startIcon:H&&(0,a.jsx)(o.A,{size:20}),size:"small",children:H?"Deleting...":"Delete"})]})]}),(0,a.jsx)(p.A,{open:!!B||!!S,autoHideDuration:3e3,onClose:()=>{_(null),I(null)},anchorOrigin:{vertical:"top",horizontal:"right"},sx:{marginTop:8},children:B||S?(0,a.jsx)(f.A,{onClose:()=>{_(null),I(null)},severity:B?"success":"error",children:B||S}):(0,a.jsx)(u.A,{})})]})}}}]);
//# sourceMappingURL=1981.7c46b139c149bfa3.js.map