"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942,6971,8561,9352],{30555:(e,t,a)=>{a.d(t,{A:()=>o,K:()=>i});var n=a(81045),r=a(37157);function i(e){return(0,r.Ay)("MuiDivider",e)}let o=(0,n.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},93857:(e,t,a)=>{a.d(t,{A:()=>o,f:()=>i});var n=a(81045),r=a(37157);function i(e){return(0,r.Ay)("MuiListItemIcon",e)}let o=(0,n.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},60391:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(12115),r=a(43463),i=a(7123),o=a(79251),s=a(9561),l=a(72762),c=a(89142),d=a(12567),p=a(28005),u=a(48827),h=a(95155);let m=e=>{let{classes:t,inset:a,primary:n,secondary:r,dense:o}=e;return(0,i.A)({root:["root",a&&"inset",o&&"dense",n&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},p.b,t)},y=(0,c.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[{["& .".concat(p.A.primary)]:t.primary},{["& .".concat(p.A.secondary)]:t.secondary},t.root,a.inset&&t.inset,a.primary&&a.secondary&&t.multiline,a.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(o.A.root,":where(& .").concat(p.A.primary,")")]:{display:"block"},[".".concat(o.A.root,":where(& .").concat(p.A.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),v=n.forwardRef(function(e,t){let a=(0,d.b)({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:c=!1,inset:p=!1,primary:v,primaryTypographyProps:f,secondary:g,secondaryTypographyProps:b,slots:A={},slotProps:w={},...x}=a,{dense:C}=n.useContext(l.A),k=null!=v?v:i,j=g,M={...a,disableTypography:c,inset:p,primary:!!k,secondary:!!j,dense:C},D=m(M),R={slots:A,slotProps:{primary:f,secondary:b,...w}},[S,T]=(0,u.A)("primary",{className:D.primary,elementType:s.A,externalForwardedProps:R,ownerState:M}),[I,L]=(0,u.A)("secondary",{className:D.secondary,elementType:s.A,externalForwardedProps:R,ownerState:M});return null==k||k.type===s.A||c||(k=(0,h.jsx)(S,{variant:C?"body2":"body1",component:(null==T?void 0:T.variant)?void 0:"span",...T,children:k})),null==j||j.type===s.A||c||(j=(0,h.jsx)(I,{variant:"body2",color:"textSecondary",...L,children:j})),(0,h.jsxs)(y,{className:(0,r.A)(D.root,o),ownerState:M,ref:t,...x,children:[k,j]})})},28005:(e,t,a)=>{a.d(t,{A:()=>o,b:()=>i});var n=a(81045),r=a(37157);function i(e){return(0,r.Ay)("MuiListItemText",e)}let o=(0,n.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},91888:(e,t,a)=>{a.d(t,{A:()=>j});var n=a(12115),r=a(43463),i=a(7123),o=a(17280),s=a(37306),l=a(89142),c=a(98330),d=a(12567),p=a(72762),u=a(89679),h=a(59396),m=a(59328),y=a(30555),v=a(93857),f=a(28005),g=a(81045),b=a(37157);function A(e){return(0,b.Ay)("MuiMenuItem",e)}let w=(0,g.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var x=a(95155);let C=e=>{let{disabled:t,dense:a,divider:n,disableGutters:r,selected:o,classes:s}=e,l=(0,i.A)({root:["root",a&&"dense",t&&"disabled",!r&&"gutters",n&&"divider",o&&"selected"]},A,s);return{...s,...l}},k=(0,l.Ay)(u.A,{shouldForwardProp:e=>(0,s.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,c.A)(e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(w.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(w.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(w.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(w.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(w.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(y.A.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(y.A.inset)]:{marginLeft:52},["& .".concat(f.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(f.A.inset)]:{paddingLeft:36},["& .".concat(v.A.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,["& .".concat(v.A.root," svg")]:{fontSize:"1.25rem"}}}]}})),j=n.forwardRef(function(e,t){let a;let i=(0,d.b)({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:s="li",dense:l=!1,divider:c=!1,disableGutters:u=!1,focusVisibleClassName:y,role:v="menuitem",tabIndex:f,className:g,...b}=i,A=n.useContext(p.A),w=n.useMemo(()=>({dense:l||A.dense||!1,disableGutters:u}),[A.dense,l,u]),j=n.useRef(null);(0,h.A)(()=>{o&&j.current&&j.current.focus()},[o]);let M={...i,dense:w.dense,divider:c,disableGutters:u},D=C(i),R=(0,m.A)(j,t);return i.disabled||(a=void 0!==f?f:-1),(0,x.jsx)(p.A.Provider,{value:w,children:(0,x.jsx)(k,{ref:R,role:v,tabIndex:a,component:s,focusVisibleClassName:(0,r.A)(D.focusVisible,y),className:(0,r.A)(D.root,g),...b,ownerState:M,classes:D})})})},45704:(e,t,a)=>{a.d(t,{A:()=>M});var n=a(20698),r=a(12115),i=a(43463),o=a(7123),s=a(17280),l=a(71987),c=a(89142),d=a(98330),p=a(12567),u=a(81045),h=a(37157);function m(e){return(0,h.Ay)("MuiSkeleton",e)}(0,u.A)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var y=a(95155);function v(){let e=(0,n._)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"]);return v=function(){return e},e}function f(){let e=(0,n._)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"]);return f=function(){return e},e}function g(){let e=(0,n._)(["\n        animation: "," 2s ease-in-out 0.5s infinite;\n      "]);return g=function(){return e},e}function b(){let e=(0,n._)(["\n        &::after {\n          animation: "," 2s linear 0.5s infinite;\n        }\n      "]);return b=function(){return e},e}let A=e=>{let{classes:t,variant:a,animation:n,hasChildren:r,width:i,height:s}=e;return(0,o.A)({root:["root",a,n,r&&"withChildren",r&&!i&&"fitContent",r&&!s&&"heightAuto"]},m,t)},w=(0,l.i7)(v()),x=(0,l.i7)(f()),C="string"!=typeof w?(0,l.AH)(g(),w):null,k="string"!=typeof x?(0,l.AH)(b(),x):null,j=(0,c.Ay)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],!1!==a.animation&&t[a.animation],a.hasChildren&&t.withChildren,a.hasChildren&&!a.width&&t.fitContent,a.hasChildren&&!a.height&&t.heightAuto]}})((0,d.A)(e=>{let{theme:t}=e,a=String(t.shape.borderRadius).match(/[\d.\-+]*\s*(.*)/)[1]||"px",n=parseFloat(t.shape.borderRadius);return{display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:(0,s.X4)(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(n).concat(a,"/").concat(Math.round(n/.6*10)/10).concat(a),"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:e=>{let{ownerState:t}=e;return t.hasChildren},style:{"& > *":{visibility:"hidden"}}},{props:e=>{let{ownerState:t}=e;return t.hasChildren&&!t.width},style:{maxWidth:"fit-content"}},{props:e=>{let{ownerState:t}=e;return t.hasChildren&&!t.height},style:{height:"auto"}},{props:{animation:"pulse"},style:C||{animation:"".concat(w," 2s ease-in-out 0.5s infinite")}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:"linear-gradient(\n                90deg,\n                transparent,\n                ".concat((t.vars||t).palette.action.hover,",\n                transparent\n              )"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:k||{"&::after":{animation:"".concat(x," 2s linear 0.5s infinite")}}}]}})),M=r.forwardRef(function(e,t){let a=(0,p.b)({props:e,name:"MuiSkeleton"}),{animation:n="pulse",className:r,component:o="span",height:s,style:l,variant:c="text",width:d,...u}=a,h={...a,animation:n,component:o,variant:c,hasChildren:!!u.children},m=A(h);return(0,y.jsx)(j,{as:o,ref:t,className:(0,i.A)(m.root,r),ownerState:h,...u,style:{width:d,height:s,...l}})})},18561:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(95155),r=a(12115),i=a(68998),o=a(26603),s=a(33894),l=a(9561),c=a(80005),d=a(21735),p=a(22678),u=a(83774),h=a(91888),m=a(60391),y=a(45704),v=a(89262),f=a(70750),g=a(83391);let b=e=>{let{htmlContent:t,isIconButton:a,id:b,organization_id:A,subcategories:w}=e,[x,C]=(0,r.useState)(!1),[k,j]=(0,r.useState)(!1),M=(0,r.useRef)(null),[D,R]=(0,r.useState)(t),[S,T]=(0,r.useState)(""),[I,L]=(0,r.useState)("withoutData"),[z,B]=(0,r.useState)(!1),[O,P]=(0,r.useState)(""),[_,H]=(0,r.useState)(w||[]),[N,V]=(0,r.useState)([]),{token:W}=(0,g.d4)(e=>e.session),X=()=>{C(!1),setTimeout(()=>URL.revokeObjectURL(S),0),B(!1),L("withoutData"),P(""),j(!1),V([])},E=async()=>{if(b&&W){j(!0);try{let e=await (0,v.YC)(b,A,W,N);if(200==e.status){let{pdf:t}=e.data,a=await F(t);a&&(T(a),x||C(!0))}j(!1)}catch(e){console.log(e),P("PDF generation failed. Please try again later."),j(!1)}}},F=e=>{try{let t=atob(e),a=t.length,n=new Uint8Array(a);for(let e=0;e<a;e++)n[e]=t.charCodeAt(e);let r=new Blob([n],{type:"application/pdf"});return URL.createObjectURL(r)}catch(e){return console.error("Error preparing PDF for preview:",e),null}};return(0,r.useEffect)(()=>{"withoutData"==I||z||(E(),B(!0))},[I,N]),(0,r.useEffect)(()=>{R(t)},[x]),(0,n.jsxs)(i.A,{children:[a?(0,n.jsx)(f.A,{onClick:()=>{b&&W&&(j(!0),(async()=>{try{let t=await (0,v.Vd)(b,W);if(200==t.status){var e;t=t.data,R('<div className="ck ck-editor__main">\n                                    <div class="ck ck-content">\n                                    <div>'.concat(t.data.headerContent,"</div>\n                                    ").concat(t.data.bodyContent,"\n                                    ").concat(t.data.sections?t.data.sections.map(e=>e.htmlContent):"","\n                                    <footer>").concat(t.data.footerContent,"</footer>\n                                    </div>\n                                    </div>\n                            ")),H((null===(e=t.data.subcategories)||void 0===e?void 0:e.map(e=>e.name))||[]),C(!0)}}catch(e){console.error("Error fetching data for edit mode:",e)}finally{j(!1)}})())},sx:{cursor:"pointer"}}):(0,n.jsx)(o.A,{variant:"outlined",color:"primary",onClick:()=>C(!0),disabled:!D,size:"small",children:"Preview HTML"}),(0,n.jsx)(s.A,{open:x,onClose:X,"aria-labelledby":"pdf-preview-title","aria-describedby":"pdf-preview-description",children:(0,n.jsxs)(i.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"80%",bgcolor:"background.paper",p:4,pb:15,overflow:"hidden"},children:[(0,n.jsxs)(i.A,{sx:{display:"flex",mb:2},children:[(0,n.jsx)(l.A,{id:"pdf-preview-title",variant:"h5",component:"h2",gutterBottom:!0,children:"HTML Preview"}),b&&(0,n.jsxs)(c.A,{value:I,exclusive:!0,onChange:(e,a)=>{L(e=>a!==e?a:e),b||R(t)},"aria-label":"preview mode",sx:{ml:2,mt:.6,"& .MuiToggleButton-root":{width:125,height:25}},children:[(0,n.jsx)(d.A,{size:"small",id:"withoutData",value:"withoutData","aria-label":"Preview without Data",children:"Without Data"}),(0,n.jsx)(d.A,{size:"small",id:"withData",value:"withData","aria-label":"Preview with Data",children:"With Data"})]}),"withoutData"!=I&&(0,n.jsx)(p.A,{variant:"standard",sx:{ml:1,width:200},size:"small",children:(0,n.jsx)(u.A,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:N,onChange:e=>{let{target:{value:t}}=e;V(()=>"string"==typeof t?t.split(","):t),B(!1)},renderValue:e=>e.join(", "),size:"small",children:null==_?void 0:_.map(e=>(0,n.jsx)(h.A,{value:e,children:(0,n.jsx)(m.A,{primary:e})},e))})})]}),k&&(0,n.jsx)(i.A,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",top:0,left:0,width:"100%",zIndex:1,children:(0,n.jsx)(y.A,{variant:"rectangular",width:"90%",height:"90%"})}),"withoutData"!=I&&!k&&S&&(0,n.jsx)("iframe",{src:S,title:"PDF Preview",width:"100%",height:"100%",style:{border:"none"}}),"withoutData"!=I&&O&&!k&&(0,n.jsx)(l.A,{id:"pdf-preview-description",color:"error",align:"center",variant:"h6",children:O}),D?(0,n.jsx)(i.A,{sx:{opacity:"withoutData"==I?1:0,height:"100%",width:"100%",position:"withoutData"==I?"relative":"absolute",mt:"withoutData"==I?0:1500},children:(0,n.jsx)("iframe",{ref:M,width:"100%",height:"100%",title:"HTML Preview",style:{border:"none"},srcDoc:'\n                                    <!DOCTYPE html>\n                                    <html lang="en">\n                                    <head>\n                                    <link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/44.1.0/ckeditor5.css">\n                                        <style>\n                                            body {\n                                                margin: 0;\n                                                padding: 0;\n                                            },\n                                            .ck-content {\n                                                 margin: 0 auto;\n                                            }\n                                        </style>\n                                    </head>\n                                    <body>\n                                    '.concat(D,"\n                                    </body>\n                                    </html>\n                                ")})}):(0,n.jsx)(l.A,{id:"pdf-preview-description",color:"error",align:"center",variant:"h6",children:"withoutData"!=I||k?"":"No HTML content available."}),(0,n.jsx)(o.A,{variant:"outlined",color:"info",onClick:X,sx:{mt:2,float:"right"},size:"small",children:"Close"})]})})]})}},25033:(e,t,a)=>{a.d(t,{n:()=>n});let n=a(82651).A.create({baseURL:"".concat("http://localhost:4000/api_/","v1"),timeout:3e4,headers:{"Content-Type":"application/json","Allow-Control-Allow-Origin":"*"}})},89262:(e,t,a)=>{a.d(t,{KW:()=>c,TA:()=>r,Ue:()=>p,Vd:()=>s,Wv:()=>o,YC:()=>i,h1:()=>l,kH:()=>d});var n=a(25033);let r=async(e,t)=>n.n.post("/pdf-templates/resource",e,{headers:{Authorization:"Bearer ".concat(t)}}),i=async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return n.n.get("/pdf-templates/preview/"+e,{headers:{Authorization:"Bearer ".concat(a)},params:{organization_id:t,subcategoriesFilter:r}})},o=async(e,t)=>n.n.post("/pdf-templates/convert",e,{headers:{Authorization:"Bearer ".concat(t)}}),s=async(e,t)=>n.n.get("/pdf-templates/resource/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),l=async function(e,t){let{sortOrder:a="asc",startFrom:r=0,to:i=10,sortBy:o="name",addonsFilter:s="",search:l=""}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.n.get("/pdf-templates/template/page",{headers:{Authorization:"Bearer ".concat(t)},params:{sortOrder:a,startFrom:r,to:i,sortBy:o,addonsFilter:s,search:l,organization_id:e}})},c=async(e,t,a)=>n.n.put("/pdf-templates/resource/".concat(e),t,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),d=async(e,t,a)=>n.n.put("/pdf-templates/resource/dummy-data/".concat(e),{json:t},{headers:{Authorization:"Bearer ".concat(a)}}),p=async(e,t)=>n.n.delete("/pdf-templates/resource/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})}}]);
//# sourceMappingURL=8561.1931f39cefb20d41.js.map