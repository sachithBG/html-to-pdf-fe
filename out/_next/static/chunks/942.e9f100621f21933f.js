"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942,9352],{30555:(e,t,a)=>{a.d(t,{A:()=>o,K:()=>n});var r=a(81045),i=a(37157);function n(e){return(0,i.Ay)("MuiDivider",e)}let o=(0,r.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},93857:(e,t,a)=>{a.d(t,{A:()=>o,f:()=>n});var r=a(81045),i=a(37157);function n(e){return(0,i.Ay)("MuiListItemIcon",e)}let o=(0,r.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},60391:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(12115),i=a(43463),n=a(7123),o=a(79251),l=a(9561),s=a(72762),c=a(89142),d=a(12567),p=a(28005),u=a(48827),m=a(95155);let h=e=>{let{classes:t,inset:a,primary:r,secondary:i,dense:o}=e;return(0,n.A)({root:["root",a&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},p.b,t)},y=(0,c.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[{["& .".concat(p.A.primary)]:t.primary},{["& .".concat(p.A.secondary)]:t.secondary},t.root,a.inset&&t.inset,a.primary&&a.secondary&&t.multiline,a.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(o.A.root,":where(& .").concat(p.A.primary,")")]:{display:"block"},[".".concat(o.A.root,":where(& .").concat(p.A.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),v=r.forwardRef(function(e,t){let a=(0,d.b)({props:e,name:"MuiListItemText"}),{children:n,className:o,disableTypography:c=!1,inset:p=!1,primary:v,primaryTypographyProps:g,secondary:b,secondaryTypographyProps:f,slots:A={},slotProps:x={},...w}=a,{dense:C}=r.useContext(s.A),j=null!=v?v:n,k=b,D={...a,disableTypography:c,inset:p,primary:!!j,secondary:!!k,dense:C},M=h(D),I={slots:A,slotProps:{primary:g,secondary:f,...x}},[L,T]=(0,u.A)("primary",{className:M.primary,elementType:l.A,externalForwardedProps:I,ownerState:D}),[O,S]=(0,u.A)("secondary",{className:M.secondary,elementType:l.A,externalForwardedProps:I,ownerState:D});return null==j||j.type===l.A||c||(j=(0,m.jsx)(L,{variant:C?"body2":"body1",component:(null==T?void 0:T.variant)?void 0:"span",...T,children:j})),null==k||k.type===l.A||c||(k=(0,m.jsx)(O,{variant:"body2",color:"textSecondary",...S,children:k})),(0,m.jsxs)(y,{className:(0,i.A)(M.root,o),ownerState:D,ref:t,...w,children:[j,k]})})},28005:(e,t,a)=>{a.d(t,{A:()=>o,b:()=>n});var r=a(81045),i=a(37157);function n(e){return(0,i.Ay)("MuiListItemText",e)}let o=(0,r.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},91888:(e,t,a)=>{a.d(t,{A:()=>k});var r=a(12115),i=a(43463),n=a(7123),o=a(17280),l=a(37306),s=a(89142),c=a(98330),d=a(12567),p=a(72762),u=a(89679),m=a(59396),h=a(59328),y=a(30555),v=a(93857),g=a(28005),b=a(81045),f=a(37157);function A(e){return(0,f.Ay)("MuiMenuItem",e)}let x=(0,b.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var w=a(95155);let C=e=>{let{disabled:t,dense:a,divider:r,disableGutters:i,selected:o,classes:l}=e,s=(0,n.A)({root:["root",a&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},A,l);return{...l,...s}},j=(0,s.Ay)(u.A,{shouldForwardProp:e=>(0,l.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,c.A)(e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(x.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(x.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(x.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(x.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(x.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(y.A.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(y.A.inset)]:{marginLeft:52},["& .".concat(g.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(g.A.inset)]:{paddingLeft:36},["& .".concat(v.A.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,["& .".concat(v.A.root," svg")]:{fontSize:"1.25rem"}}}]}})),k=r.forwardRef(function(e,t){let a;let n=(0,d.b)({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:l="li",dense:s=!1,divider:c=!1,disableGutters:u=!1,focusVisibleClassName:y,role:v="menuitem",tabIndex:g,className:b,...f}=n,A=r.useContext(p.A),x=r.useMemo(()=>({dense:s||A.dense||!1,disableGutters:u}),[A.dense,s,u]),k=r.useRef(null);(0,m.A)(()=>{o&&k.current&&k.current.focus()},[o]);let D={...n,dense:x.dense,divider:c,disableGutters:u},M=C(n),I=(0,h.A)(k,t);return n.disabled||(a=void 0!==g?g:-1),(0,w.jsx)(p.A.Provider,{value:x,children:(0,w.jsx)(j,{ref:I,role:v,tabIndex:a,component:l,focusVisibleClassName:(0,i.A)(M.focusVisible,y),className:(0,i.A)(M.root,b),...f,ownerState:D,classes:M})})})},18561:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(95155),i=a(12115),n=a(68998),o=a(26603),l=a(33894),s=a(9561),c=a(80005),d=a(21735),p=a(22678),u=a(83774),m=a(91888),h=a(60391),y=a(45704),v=a(89262),g=a(70750),b=a(83391);let f=e=>{let{htmlContent:t,isIconButton:a,id:f,organization_id:A,subcategories:x}=e,[w,C]=(0,i.useState)(!1),[j,k]=(0,i.useState)(!1),D=(0,i.useRef)(null),[M,I]=(0,i.useState)(t),[L,T]=(0,i.useState)(""),[O,S]=(0,i.useState)("withoutData"),[P,R]=(0,i.useState)(!1),[B,z]=(0,i.useState)(""),[N,V]=(0,i.useState)(x||[]),[E,H]=(0,i.useState)([]),{token:_}=(0,b.d4)(e=>e.session),F=()=>{C(!1),setTimeout(()=>URL.revokeObjectURL(L),0),R(!1),S("withoutData"),z(""),k(!1),H([])},U=async()=>{if(f&&_){k(!0);try{let e=await (0,v.YC)(f,A,_,E);if(200==e.status){let{pdf:t}=e.data,a=await W(t);a&&(T(a),w||C(!0))}k(!1)}catch(e){console.log(e),z("PDF generation failed. Please try again later."),k(!1)}}},W=e=>{try{let t=atob(e),a=t.length,r=new Uint8Array(a);for(let e=0;e<a;e++)r[e]=t.charCodeAt(e);let i=new Blob([r],{type:"application/pdf"});return URL.createObjectURL(i)}catch(e){return console.error("Error preparing PDF for preview:",e),null}};return(0,i.useEffect)(()=>{"withoutData"==O||P||(U(),R(!0))},[O,E]),(0,i.useEffect)(()=>{I(t)},[w]),(0,r.jsxs)(n.A,{children:[a?(0,r.jsx)(g.A,{onClick:()=>{f&&_&&(k(!0),(async()=>{try{let t=await (0,v.Vd)(f,_);if(200==t.status){var e;t=t.data,I('<div className="ck ck-editor__main">\n                                    <div class="ck ck-content">\n                                    <div>'.concat(t.data.headerContent,"</div>\n                                    ").concat(t.data.bodyContent,"\n                                    ").concat(t.data.sections?t.data.sections.map(e=>e.htmlContent):"","\n                                    <footer>").concat(t.data.footerContent,"</footer>\n                                    </div>\n                                    </div>\n                            ")),V((null===(e=t.data.subcategories)||void 0===e?void 0:e.map(e=>e.name))||[]),C(!0)}}catch(e){console.error("Error fetching data for edit mode:",e)}finally{k(!1)}})())},sx:{cursor:"pointer"}}):(0,r.jsx)(o.A,{variant:"outlined",color:"primary",onClick:()=>C(!0),disabled:!M,size:"small",children:"Preview HTML"}),(0,r.jsx)(l.A,{open:w,onClose:F,"aria-labelledby":"pdf-preview-title","aria-describedby":"pdf-preview-description",children:(0,r.jsxs)(n.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"80%",bgcolor:"background.paper",p:4,pb:15,overflow:"hidden"},children:[(0,r.jsxs)(n.A,{sx:{display:"flex",mb:2},children:[(0,r.jsx)(s.A,{id:"pdf-preview-title",variant:"h5",component:"h2",gutterBottom:!0,children:"HTML Preview"}),f&&(0,r.jsxs)(c.A,{value:O,exclusive:!0,onChange:(e,a)=>{S(e=>a!==e?a:e),f||I(t)},"aria-label":"preview mode",sx:{ml:2,mt:.6,"& .MuiToggleButton-root":{width:125,height:25}},children:[(0,r.jsx)(d.A,{size:"small",id:"withoutData",value:"withoutData","aria-label":"Preview without Data",children:"Without Data"}),(0,r.jsx)(d.A,{size:"small",id:"withData",value:"withData","aria-label":"Preview with Data",children:"With Data"})]}),"withoutData"!=O&&(0,r.jsx)(p.A,{variant:"standard",sx:{ml:1,width:200},size:"small",children:(0,r.jsx)(u.A,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:E,onChange:e=>{let{target:{value:t}}=e;H(()=>"string"==typeof t?t.split(","):t),R(!1)},renderValue:e=>e.join(", "),size:"small",children:null==N?void 0:N.map(e=>(0,r.jsx)(m.A,{value:e,children:(0,r.jsx)(h.A,{primary:e})},e))})})]}),j&&(0,r.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",top:0,left:0,width:"100%",zIndex:1,children:(0,r.jsx)(y.A,{variant:"rectangular",width:"90%",height:"90%"})}),"withoutData"!=O&&!j&&L&&(0,r.jsx)("iframe",{src:L,title:"PDF Preview",width:"100%",height:"100%",style:{border:"none"}}),"withoutData"!=O&&B&&!j&&(0,r.jsx)(s.A,{id:"pdf-preview-description",color:"error",align:"center",variant:"h6",children:B}),M?(0,r.jsx)(n.A,{sx:{opacity:"withoutData"==O?1:0,height:"100%",width:"100%",position:"withoutData"==O?"relative":"absolute",mt:"withoutData"==O?0:1500},children:(0,r.jsx)("iframe",{ref:D,width:"100%",height:"100%",title:"HTML Preview",style:{border:"none"},srcDoc:'\n                                    <!DOCTYPE html>\n                                    <html lang="en">\n                                    <head>\n                                    <link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/44.1.0/ckeditor5.css">\n                                        <style>\n                                            body {\n                                                margin: 0;\n                                                padding: 0;\n                                            },\n                                            .ck-content {\n                                                 margin: 0 auto;\n                                            }\n                                        </style>\n                                    </head>\n                                    <body>\n                                    '.concat(M,"\n                                    </body>\n                                    </html>\n                                ")})}):(0,r.jsx)(s.A,{id:"pdf-preview-description",color:"error",align:"center",variant:"h6",children:"withoutData"!=O||j?"":"No HTML content available."}),(0,r.jsx)(o.A,{variant:"outlined",color:"info",onClick:F,sx:{mt:2,float:"right"},size:"small",children:"Close"})]})})]})}}}]);
//# sourceMappingURL=942.e9f100621f21933f.js.map