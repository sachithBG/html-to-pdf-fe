(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5515],{45280:(e,a,t)=>{Promise.resolve().then(t.bind(t,94676))},94676:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>V});var l=t(95155),n=t(12115),i=t(68998),r=t(35761),o=t(88648),s=t(79987),d=t(22678),c=t(90507),h=t(83774),u=t(91888),p=t(83726),x=t(60391),m=t(39905),g=t(26603),A=t(43655),v=t(78562),j=t(49234),y=t(72926),b=t(894),f=t(66917),z=t(9561),C=t(66365),T=t(10897),w=t(45704),_=t(96854),S=t(83391),k=t(90917),E=t(84778),O=t(21760),B=t(79545),N=t(450),I=t(6748),G=t(92278),L=t(77711);let W=(0,L.default)(()=>Promise.all([t.e(7057),t.e(1981)]).then(t.bind(t,61981)),{loadableGenerated:{webpack:()=>[61981]},ssr:!1}),R=(0,L.default)(()=>Promise.all([t.e(7831),t.e(9396)]).then(t.bind(t,89396)),{loadableGenerated:{webpack:()=>[89396]},ssr:!1}),q=(0,L.default)(()=>Promise.all([t.e(194),t.e(1983),t.e(7916)]).then(t.bind(t,7916)),{loadableGenerated:{webpack:()=>[7916]},ssr:!1});function P(e){let{children:a,value:t,index:n,...r}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n),...r,children:t===n&&(0,l.jsx)(i.A,{sx:{p:3},children:a})})}function D(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}let V=()=>{var e;let[a,t]=(0,n.useState)([]),[L,V]=(0,n.useState)([]),[Z,F]=(0,n.useState)("CONTENT"),[H,K]=(0,n.useState)(""),[J,M]=(0,n.useState)(""),[U,Q]=(0,n.useState)([]),[X,Y]=(0,n.useState)(null),[$,ee]=(0,n.useState)(null),[ea,et]=(0,n.useState)(null),[el,en]=(0,n.useState)(null),[ei,er]=(0,n.useState)({}),[eo,es]=(0,n.useState)(!1),[ed,ec]=(0,n.useState)(""),eh=(0,S.d4)(e=>(0,k.x5)(e.organization)),{token:eu}=(0,S.d4)(e=>e.session),ep=(0,r.A)(),ex=!!$,em=!!ea,[eg,eA]=(0,n.useState)(0),[ev,ej]=(0,n.useState)(""),[ey,eb]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=async()=>{try{eb(!0);let a=await (0,E.ip)(null==eh?void 0:eh.id,eu);if(200==a.status){t(()=>a.data);try{var e;let t=await (0,O.wT)(null===(e=a.data)||void 0===e?void 0:e.filter(e=>L.includes(e.name)),eu);200==t.status&&Q(t.data)}catch(e){console.error("Error fetching tags:",e)}}}catch(e){console.error("Error fetching addons:",e)}finally{eb(!1)}};return eu&&e(),()=>{t([]),Q([])}},[null==eh?void 0:eh.id,eg]);let ef=async e=>{V(e.target.value);try{let a=await (0,O.wT)(e.target.value,eu);200==a.status&&Q(a.data)}catch(e){console.error("Error fetching tags:",e)}},ez=async()=>{er({});let e={};if(J||(e.name="Tag name is required"),H||(e.field_path="Tag key is required"),L.length||(e.tag_type="At least one addon must be selected"),Object.keys(e).length>0){er(e);return}let a={name:J,addon_ids:L,organization_id:eh.id,tag_type:Z||"CONTENT",field_path:H};try{let e=await (0,O.VZ)(a,eu);201==e.status&&(Q(a=>[...a,e.data]),K(""),M(""))}catch(e){console.error("Error fetching addons:",e)}},eC=async e=>{try{let a=await (0,O._R)(e,eu);204==a.status&&Q(U.filter(a=>a.id!==e))}catch(e){console.error("Error fetching addons:",e)}},eT=(e,a)=>{ee(e.currentTarget),Y(a)},ew=()=>{ee(null),Y(null)},e_=(e,a)=>{et(e.currentTarget),en(a)},eS=()=>{et(null),en(null)},ek=async()=>{if(X)try{let e=await (0,O.Gw)(X,eu);200==e.status&&(Q(a=>a.map(a=>a.id+""===e.data.id?e.data:a)),ew())}catch(e){console.error("Error fetching addons:",e)}},eE=e=>{navigator.clipboard.writeText("{{".concat(e,"}}")).then(()=>{ec("{{".concat(e,"}}")),es(!0),setTimeout(()=>es(!1),3e3)}).catch(e=>{console.error("Failed to copy: ",e)})};return(0,l.jsxs)(i.A,{className:"container mx-auto p-4",children:[(0,l.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,l.jsxs)(o.A,{value:eg,onChange:(e,a)=>{eA(a)},"aria-label":"basic tabs example",children:[(0,l.jsx)(s.A,{label:"Tag",...D(0)}),(0,l.jsx)(s.A,{label:"Type/Status",...D(1)}),(0,l.jsx)(s.A,{label:"Template Test data",...D(2)}),(0,l.jsx)(s.A,{label:"Addons",...D(3)})]})}),(0,l.jsxs)(P,{value:eg,index:0,children:[(0,l.jsx)(i.A,{mb:3,mt:4,children:(0,l.jsxs)(d.A,{fullWidth:!0,size:"small",children:[(0,l.jsx)(c.A,{children:"Addons"}),(0,l.jsx)(h.A,{multiple:!0,value:L,onChange:ef,label:"Addons",required:!0,size:"small",renderValue:e=>e.map(e=>{var t;return null===(t=a.find(a=>a.id===e))||void 0===t?void 0:t.name}).join(", "),children:null==a?void 0:a.map(e=>(0,l.jsxs)(u.A,{value:e.id,children:[(0,l.jsx)(p.A,{checked:L.includes(e.id)}),(0,l.jsx)(x.A,{primary:e.name})]},e.id))})]})}),(0,l.jsx)(i.A,{mb:2,mt:2,children:(0,l.jsxs)(d.A,{fullWidth:!0,size:"small",children:[(0,l.jsx)(c.A,{children:"Type"}),(0,l.jsx)(h.A,{value:Z,onChange:e=>{F(e.target.value)},required:!0,label:"Type",size:"small",children:["CONTENT","TABLE","IMAGE"].map(e=>(0,l.jsx)(u.A,{value:e,children:e},e))})]})}),(0,l.jsx)(m.A,{label:"Tag Name",fullWidth:!0,value:J,onChange:e=>M(e.target.value),margin:"normal",error:!!ei.name,helperText:ei.name,disabled:"TABLE"==Z,size:"small"}),(0,l.jsx)(m.A,{label:"Tag Key",fullWidth:!0,value:H,onChange:e=>K(e.target.value),margin:"normal",error:!!ei.field_path,helperText:ei.field_path,disabled:"TABLE"==Z,size:"small"}),(0,l.jsx)(g.A,{size:"small",variant:"outlined",color:"primary",sx:{float:"right"},onClick:ez,disabled:"TABLE"==Z,children:"Save Tag"}),(0,l.jsx)("div",{style:{marginTop:20},children:(0,l.jsx)(A.A,{container:!0,spacing:2,children:null==U?void 0:U.filter(e=>e.tag_type===Z).map(e=>(0,l.jsx)(A.A,{children:(0,l.jsxs)(v.A,{elevation:3,sx:{display:"flex",alignItems:"center",p:1,borderRadius:"8px",boxShadow:3,bgcolor:ep.palette.background.paper,":hover":{boxShadow:6}},children:[(0,l.jsx)(j.A,{label:e.name,onDelete:a=>eT(a,e),deleteIcon:(0,l.jsx)(B.A,{sx:{color:"light"===ep.palette.mode?ep.palette.success.dark:ep.palette.secondary.light}}),sx:{borderRadius:"12px",borderColor:"transparent",ml:1,flexGrow:1,"&:hover":{borderColor:ep.palette.primary.main}},variant:"outlined"}),(0,l.jsx)(y.A,{title:"Copy Key "+e.field_path,children:(0,l.jsx)(b.A,{onClick:()=>eE(e.field_path),size:"small",sx:{padding:"6px","&:hover":{backgroundColor:ep.palette.info.main,color:ep.palette.common.white}},children:(0,l.jsx)(G.A,{sx:{fontSize:16}})})}),(0,l.jsx)(b.A,{onClick:a=>e_(a,e.id),size:"small",sx:{padding:"6px","&:hover":{backgroundColor:ep.palette.error.main,color:ep.palette.common.white}},children:(0,l.jsx)(N.A,{sx:{fontSize:16}})})]})},e.id))})}),(0,l.jsx)(f.Ay,{id:ex?"simple-popover":void 0,open:ex,anchorEl:$,onClose:ew,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,l.jsxs)(i.A,{sx:{p:2,display:"flex",alignItems:"center"},children:[(0,l.jsx)(m.A,{value:(null==X?void 0:X.name)||"",onChange:e=>Y({...X,name:e.target.value}),size:"small",placeholder:"name"}),(0,l.jsx)(m.A,{value:(null==X?void 0:null===(e=X.field_path)||void 0===e?void 0:e.split("._table_")[0])||"",onChange:e=>Y({...X,field_path:e.target.value}),size:"small",placeholder:"path",sx:{ml:1}}),(0,l.jsx)(b.A,{onClick:ek,children:(0,l.jsx)(I.A,{})})]})}),(0,l.jsx)(f.Ay,{id:em?"delete-popover":void 0,open:em,anchorEl:ea,onClose:eS,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,l.jsxs)(i.A,{sx:{p:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(z.A,{children:"Are you sure you want to delete this addon?"}),(0,l.jsxs)(i.A,{sx:{mt:1,display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,l.jsx)(g.A,{variant:"outlined",onClick:eS,color:"primary",size:"small",children:"Cancel"}),(0,l.jsx)(g.A,{variant:"outlined",onClick:()=>{null!==el&&(eC(el),eS())},color:"secondary",size:"small",children:"Confirm"})]})]})}),(0,l.jsx)(C.A,{open:eo,autoHideDuration:3e3,onClose:()=>es(!1),anchorOrigin:{vertical:"top",horizontal:"right"},sx:{marginTop:8},children:(0,l.jsxs)(T.A,{onClose:()=>es(!1),severity:"success",sx:{width:"100%"},children:["Tag key copied: ",ed]})})]}),(0,l.jsxs)(P,{value:eg,index:1,children:[(0,l.jsxs)(d.A,{fullWidth:!0,sx:{mb:3},size:"small",children:[(0,l.jsx)(c.A,{children:"Choose Addon"}),(0,l.jsx)(h.A,{value:ev,onChange:e=>{ej(e.target.value)},label:"Choose Addon",sx:{maxWidth:250},size:"small",children:null==a?void 0:a.map(e=>(0,l.jsx)(u.A,{value:e.id,children:e.name},e.id))})]}),ey?(0,l.jsx)(w.A,{variant:"text",width:"100%",height:40}):ev&&(0,l.jsx)(R,{addonId:ev})]}),(0,l.jsx)(P,{value:eg,index:2,children:ey?(0,l.jsx)(_.A,{}):(0,l.jsx)(q,{})}),(0,l.jsx)(P,{value:eg,index:3,children:(0,l.jsx)(W,{})})]})}},84778:(e,a,t)=>{"use strict";t.d(a,{JI:()=>n,_y:()=>o,ij:()=>i,ip:()=>r});var l=t(25033);let n=async(e,a,t)=>l.n.post("/addons",{name:e,organization_id:a},{headers:{Authorization:"Bearer ".concat(t)}}),i=async(e,a)=>l.n.put("/addons/"+e.id,e,{headers:{Authorization:"Bearer ".concat(a)}}),r=async(e,a)=>l.n.get("/addons/"+e+"/organization",{headers:{Authorization:"Bearer ".concat(a)}}),o=async(e,a)=>l.n.delete("/addons/"+e,{headers:{Authorization:"Bearer ".concat(a)}})},25033:(e,a,t)=>{"use strict";t.d(a,{n:()=>l});let l=t(82651).A.create({baseURL:"".concat("http://localhost:4000/api_/","v1"),timeout:3e4,headers:{"Content-Type":"application/json","Allow-Control-Allow-Origin":"*"}})},21760:(e,a,t)=>{"use strict";t.d(a,{Gw:()=>i,VZ:()=>n,_R:()=>o,wT:()=>r});var l=t(25033);let n=async(e,a)=>l.n.post("/tags",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}),i=async(e,a)=>l.n.put("/tags/"+e.id,e,{headers:{Authorization:"Bearer ".concat(a)}}),r=async(e,a)=>l.n.get("/tags",{headers:{Authorization:"Bearer ".concat(a)},params:{addon_ids:e}}),o=async(e,a)=>l.n.delete("/tags/"+e,{headers:{Authorization:"Bearer ".concat(a)}})},90917:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>d,F3:()=>n,L_:()=>i,SH:()=>o,o_:()=>s,x5:()=>c});let l=(0,t(48943).Z0)({name:"organization",initialState:{organizations:[]},reducers:{addOrganizationAll(e,a){e.organizations=[...e.organizations,...a.payload]},addOrganization(e,a){e.organizations.push(a.payload)},updateOrganization(e,a){let t=e.organizations.findIndex(e=>e.id===a.payload.id);-1!==t&&(e.organizations[t]=a.payload)},removeOrganization(e,a){e.organizations=e.organizations.filter(e=>e.id!==a.payload)},clearOrganizationState(e){e.organizations=[]}}}),{addOrganization:n,updateOrganization:i,removeOrganization:r,addOrganizationAll:o,clearOrganizationState:s}=l.actions,d=l.reducer,c=e=>e.organizations.find(e=>e.is_default)||null}},e=>{var a=a=>e(e.s=a);e.O(0,[3333,6603,3391,3894,943,1064,5948,8943,2651,1043,5589,3655,2926,9905,697,2070,8367,9911,3693,6297,8441,1517,7358],()=>a(45280)),_N_E=e.O()}]);
//# sourceMappingURL=page-be00509aec49f8a0.js.map