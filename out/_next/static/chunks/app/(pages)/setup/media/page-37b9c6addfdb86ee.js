(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{94932:(e,t,a)=>{Promise.resolve().then(a.bind(a,50319))},50319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var n=a(95155),i=a(12115),d=a(9552),o=a(68998),r=a(88648),l=a(79987),s=a(9561),c=a(43655),p=a(22678),u=a(90507),h=a(83774),g=a(91888),y=a(83726),m=a(60391),x=a(77711),f=a(51900),v=a(84778),b=a(90917),A=a(83391),z=a(7831),w=a(39905),j=a(26603),C=a(96854),k=a(5565),_=a(84268);let S=e=>{let{onImageUpload:t,addons:a}=e,[d,r]=(0,i.useState)([]),[l,s]=(0,i.useState)(""),[x,f]=(0,i.useState)(null),[v,b]=(0,i.useState)(!1),A="string"==typeof x&&(0,_.cH)(x)?x:x instanceof File?URL.createObjectURL(x):void 0,z=()=>d.length>0&&null!==x,S=async()=>{if(z()){b(!0);try{await t({key:l,addons:d,preview:x}),B(),b(!1)}catch(e){console.error(e),b(!1)}}},B=()=>{r([]),s(""),f(null)};return(0,n.jsxs)(o.A,{sx:{width:"100%",padding:4},children:[(0,n.jsxs)(c.A,{container:!0,spacing:2,children:[(0,n.jsx)(c.A,{size:{sm:6},children:(0,n.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,n.jsx)(u.A,{children:"Addons"}),(0,n.jsx)(h.A,{multiple:!0,value:d,onChange:e=>{r(e.target.value)},label:"Addons",required:!0,size:"small",renderValue:e=>e.join(", "),children:null==a?void 0:a.map(e=>(0,n.jsxs)(g.A,{value:e.name,children:[(0,n.jsx)(y.A,{checked:d.includes(e.name)}),(0,n.jsx)(m.A,{primary:e.name})]},e.id))})]})}),(0,n.jsx)(c.A,{size:{sm:6},display:"none",children:(0,n.jsx)(w.A,{label:"Key",variant:"outlined",fullWidth:!0,value:l,onChange:e=>{s(e.target.value)},required:!0,size:"small"})})]}),(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&f(e.target.files[0])},className:"block  mt-5"}),(0,n.jsx)(o.A,{sx:{marginTop:2,display:"flex",justifyContent:"center"},children:A&&(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(k.default,{width:100,height:100,src:A,alt:"Preview",className:"w-60 h-auto"})})}),(0,n.jsx)(o.A,{sx:{marginTop:2,display:"flex",justifyContent:"end"},children:(0,n.jsx)(j.A,{onClick:S,variant:"outlined",color:"primary",disabled:!z()||v,size:"small",children:v?(0,n.jsx)(C.A,{size:24}):"Upload Image"})})]})},B=(0,x.default)(()=>Promise.all([a.e(2926),a.e(7057),a.e(5688)]).then(a.bind(a,35688)),{loadableGenerated:{webpack:()=>[35688]},ssr:!1});function E(e){let{value:t,index:a,children:i}=e;return t===a&&(0,n.jsx)(o.A,{sx:{padding:2},children:i})}let T=function(){let[e,t]=(0,i.useState)("1"),[a,x]=(0,i.useState)([]),{token:w}=(0,A.d4)(e=>e.session),[j,C]=(0,i.useState)(!0),[k,_]=(0,i.useState)([]),[T,I]=(0,i.useState)(new Map),[M,O]=(0,i.useState)(new Map),[F,N]=(0,i.useState)([]),{enqueueSnackbar:L}=(0,z.dh)(),D=(0,A.d4)(e=>(0,b.x5)(e.organization)),H=(0,i.useCallback)(async e=>{try{let a=k.filter(t=>e.addons.includes(t.name)).map(e=>e.id),n=await (0,f.o7)(D.id,e.preview,a,w);if(201==n.status){var t;L("Uploaded",{variant:"success"});let e=null===(t=n.data)||void 0===t?void 0:t.data;x(t=>[...t,{id:e.id,file_key:e.file_key,addon_ids:e.addon_ids,url:e.url,organization_id:e.organization_id}])}}catch(e){L("Failed ".concat(null==e?void 0:e.message),{variant:"error"}),console.error(e)}},[null==D?void 0:D.id,w,k]);(0,i.useEffect)(()=>{let e=async()=>{try{C(!0);let e=await (0,v.ip)(null==D?void 0:D.id,w);200==e.status&&_(()=>e.data)}catch(e){console.error("Error fetching addons:",e)}finally{C(!1)}},t=async()=>{try{let e=await (0,f.zM)(null==D?void 0:D.id,w);x(()=>e)}catch(e){console.error("Error fetching addons:",e)}finally{C(!1)}};return w&&(e(),t()),()=>{_([])}},[null==D?void 0:D.id]),(0,i.useEffect)(()=>{if(null==D?void 0:D.id){let e=async()=>{try{let e=await (0,f.zM)(null==D?void 0:D.id,w,F);x(()=>e)}catch(e){console.error("Error fetching addons:",e)}finally{C(!1)}};C(!0),e()}},[F]);let R=(e,t)=>{e&&navigator.clipboard.writeText(e).then(()=>{I(e=>new Map(e).set(t,!0)),O(e=>new Map(e).set(t,"Copied"));let e=setTimeout(()=>{I(e=>new Map(e).set(t,!1)),O(e=>new Map(e).set(t,"Copy URL")),clearTimeout(e)},2e3)}).catch(e=>{console.error("Failed to copy: ",e)})},U=async e=>{try{let t=await (0,f.vL)(e,w);204==t.status&&x(t=>[...t.filter(t=>t.file_key!=e)])}catch(e){console.error("Error fetching addons:",e)}};return(0,n.jsxs)(d.A,{children:[(0,n.jsx)(o.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,n.jsxs)(r.A,{value:e,onChange:(e,a)=>{t(a)},"aria-label":"Media management tabs",children:[(0,n.jsx)(l.A,{label:"All Images",value:"1"}),(0,n.jsx)(l.A,{label:"New Image",value:"2"})]})}),(0,n.jsxs)(E,{value:e,index:"1",children:[(0,n.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"All Created Images"}),(0,n.jsx)(c.A,{size:{lg:6},sx:{m:5},children:(0,n.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,n.jsx)(u.A,{children:"Filter By Addons"}),(0,n.jsx)(h.A,{multiple:!0,value:F,onChange:e=>{N(e.target.value)},label:"Filter By Addons",required:!0,size:"small",renderValue:e=>k.filter(t=>e.includes(t.id)).map(e=>e.name).join(", "),children:null==k?void 0:k.map(e=>(0,n.jsxs)(g.A,{value:e.id,children:[(0,n.jsx)(y.A,{checked:F.includes(e.id)}),(0,n.jsx)(m.A,{primary:e.name})]},e.id))})]})}),!j&&(0,n.jsx)(c.A,{container:!0,spacing:2,children:(0,n.jsx)(B,{imageList:a,addons:k,handleDelete:e=>U(e),handleCopy:(e,t)=>R(e,t),tooltipImg:M,copiedToken:T})})]}),(0,n.jsx)(E,{value:e,index:"2",children:(0,n.jsx)(S,{onImageUpload:H,addons:k})})]})}},84778:(e,t,a)=>{"use strict";a.d(t,{JI:()=>i,_y:()=>r,ij:()=>d,ip:()=>o});var n=a(25033);let i=async(e,t,a)=>n.n.post("/addons",{name:e,organization_id:t},{headers:{Authorization:"Bearer ".concat(a)}}),d=async(e,t)=>n.n.put("/addons/"+e.id,e,{headers:{Authorization:"Bearer ".concat(t)}}),o=async(e,t)=>n.n.get("/addons/"+e+"/organization",{headers:{Authorization:"Bearer ".concat(t)}}),r=async(e,t)=>n.n.delete("/addons/"+e,{headers:{Authorization:"Bearer ".concat(t)}})},25033:(e,t,a)=>{"use strict";a.d(t,{n:()=>n});let n=a(82651).A.create({baseURL:"".concat("http://localhost:4000/api_/","v1"),timeout:3e4,headers:{"Content-Type":"application/json","Allow-Control-Allow-Origin":"*"}})},51900:(e,t,a)=>{"use strict";a.d(t,{N0:()=>d,XO:()=>i,o7:()=>o,vL:()=>l,zM:()=>r});var n=a(25033);let i=async(e,t,a)=>{let i=new FormData;i.append("avatar",t);try{return(await n.n.put("/profiles/".concat(e,"/avatar"),i,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error uploading image:",e),e}},d=async(e,t,a)=>{let i=new FormData;i.append("logo",t);try{return(await n.n.post("/s3/upload/org/logo",i,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"},params:{organizationId:e}})).data}catch(e){throw console.error("Error uploading image:",e),e}},o=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,d=new FormData;return d.append("media",t),await n.n.post("/s3/media/upload",d,{headers:{Authorization:"Bearer ".concat(i),"Content-Type":"multipart/form-data"},params:{organization_id:e,addon_ids:a}})},r=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{return(await n.n.get("/media/organization/"+e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},params:{organizationId:e,addon_ids:a}})).data}catch(e){throw console.error("Error uploading image:",e),e}},l=async(e,t)=>n.n.delete("/s3/delete/img",{headers:{Authorization:"Bearer ".concat(t)},params:{fileKey:e}})},84268:(e,t,a)=>{"use strict";a.d(t,{$3:()=>c,L9:()=>r,Wh:()=>s,Z_:()=>n,cH:()=>d,ll:()=>l,qG:()=>i});let n=["CONTENT","TABLE","IMAGE"],i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},d=e=>/^https:\/\/pdf-crafter2\.s3\.us-east-1\.amazonaws\.com\/.+$/.test(e),o="https://media.istockphoto.com/id/1967543722/photo/the-city-of-london-skyline-at-night-united-kingdom.jpg?s=2048x2048&w=is&k=20&c=ZMquw-lP_vrSVoUlSWjuWIZHdVma7z4ju9pD1EkRPvs=",r=' <div style="font-family: Arial, sans-serif; line-height: 1.5; margin: 0; padding: 0; text-align: center;text-align: center; width: 100%; border-top: 1px solid #ccc;">\n<div style="background-color: #f4f4f4; padding: 20px; ">\n      <img\n        src="'.concat(o,'"\n        alt="Logo"\n        style="display: block; margin: 0 auto; max-width: 100px;"\n      />\n      <h1 style="margin: 10px 0;font-size: 20px; color: #555;">Company Name</h1>\n      <p style="margin: 0; font-size: 14px; color: #555;">Your tagline or slogan here</p>\n    </div> </div>'),l='<div style="font-size: 10px; text-align: center; width: 100%;">\n<div\n      style="background-color: #f4f4f4; padding: 20px; text-align: center; font-size: 12px; color: #555;"\n    >\n      <p style="margin: 0;">123 Business Street, Business City, BC 12345</p>\n      <p style="margin: 0;">\n        Contact us: <a href="mailto:info@company.com" style="color: #007BFF;">info@company.com</a>\n      </p>\n      <p style="margin: 0;">&copy; 2024 Company Name. All rights reserved.</p>\n    </div></div>',s='<div style="padding: 20px;">\n      <h2 style="color: #333;">Welcome to Our Report</h2>\n      <p style="margin: 0 0 10px; color: #555;">\n        Below is a summary of our performance and goals. Feel free to review the details and let us know your thoughts.\n      </p>\n\n      \x3c!-- Image Example --\x3e\n      <div style="text-align: center; margin: 20px 0;">\n        <img\n          src="'.concat(o,'"\n          alt="Sample Chart"\n          style="max-width: 100%; height: auto;"\n        />\n      </div>\n\n      \x3c!-- Table Example --\x3e\n      <h3 style="color: #333;">Performance Overview</h3>\n      <table\n        style="width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px;"\n      >\n        <thead>\n          <tr style="background-color: #f4f4f4;">\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Metric</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Target</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Achieved</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 8px;">Revenue</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">$1,000,000</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">$950,000</td>\n          </tr>\n          <tr style="background-color: #f9f9f9;">\n            <td style="border: 1px solid #ddd; padding: 8px;">Customer Growth</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">20%</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">18%</td>\n          </tr>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 8px;">Satisfaction Score</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">90%</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">88%</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n'),c={initialColumns:3,initialRows:[{col1:"Data 1",col2:"Data 2",col3:"Data 3"}],initialStyles:Array.from({length:3},()=>({backgroundColor:"#f4f4f4",fontSize:"14",padding:"8px",color:"#000"})),customHtml:'<table style="width: 100%; border-collapse: collapse; margin: 20px 0;">\n                        <thead>\n                            <tr style="background-color: #007bff; color: #ffffff;">\n                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Header 1</th>\n                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Header 2</th>\n                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Header 3</th>\n                            </tr>\n                        </thead><tbody></tbody></table>'}},90917:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>s,F3:()=>i,L_:()=>d,SH:()=>r,o_:()=>l,x5:()=>c});let n=(0,a(48943).Z0)({name:"organization",initialState:{organizations:[]},reducers:{addOrganizationAll(e,t){e.organizations=[...e.organizations,...t.payload]},addOrganization(e,t){e.organizations.push(t.payload)},updateOrganization(e,t){let a=e.organizations.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.organizations[a]=t.payload)},removeOrganization(e,t){e.organizations=e.organizations.filter(e=>e.id!==t.payload)},clearOrganizationState(e){e.organizations=[]}}}),{addOrganization:i,updateOrganization:d,removeOrganization:o,addOrganizationAll:r,clearOrganizationState:l}=n.actions,s=n.reducer,c=e=>e.organizations.find(e=>e.is_default)||null}},e=>{var t=t=>e(e.s=t);e.O(0,[3333,6603,3391,3894,943,1064,5948,8943,2651,1043,5589,3655,9905,7831,697,2070,9911,9330,8441,1517,7358],()=>t(94932)),_N_E=e.O()}]);
//# sourceMappingURL=page-37b9c6addfdb86ee.js.map