(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8837],{13289:(e,a,t)=>{Promise.resolve().then(t.bind(t,49943))},49943:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>B});var n=t(95155),i=t(12115),r=t(35761),o=t(68998),s=t(64665),l=t(9561),d=t(43655),c=t(45704),u=t(72926),h=t(894),p=t(76472),g=t(7495),m=t(2743),v=t(35781),A=t(32863),z=t(83391),x=t(90917),f=t(76487),y=t(25033);let b=async(e,a)=>y.n.get("/logs/chart-data/monthly?organizationId=".concat(e),{headers:{Authorization:"Bearer ".concat(a)}});var j=t(89262);let k=(0,t(77711).default)(()=>Promise.all([t.e(3894),t.e(1043),t.e(5589),t.e(9905),t.e(194),t.e(6091)]).then(t.bind(t,84077)),{loadableGenerated:{webpack:()=>[84077]},ssr:!1});v.t1.register(v.PP,v.kc,v.FN,v.No,v.hE,v.m_,v.s$);let _={responsive:!0,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,callback:function(e){return Number.isInteger(e)?e:null}}}}},C={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},B=()=>{let e=(0,r.A)(),{organizations:a}=(0,z.d4)(e=>e.organization),t=(0,z.d4)(e=>(0,x.x5)(e.organization)),[v,y]=(0,i.useState)(!0),[B,P]=(0,i.useState)(a),[S,O]=(0,i.useState)(!1),[w,N]=(0,i.useState)({}),{token:T}=(0,z.d4)(e=>e.session),E=(0,z.wA)(),[F,I]=(0,i.useState)(1);(0,i.useEffect)(()=>{y(!0),P(a);let n=async()=>{await b(t.id,T).then(a=>{200==a.status&&N({labels:a.data.map(e=>e.label),datasets:[{label:"PDF Requests",data:a.data.map(e=>e.value),borderColor:"dark"==e.palette.mode?"#90caf9":"#045da5",tension:.2,pointBackgroundColor:"#4caf50"}]}),y(!1)}).catch(e=>{console.error("Error fetching chart data:",e),y(!1)})};setTimeout(()=>{(null==t?void 0:t.id)&&T&&n()},1500)},[t]);let H=e=>{(0,f.lf)(e,T).then(t=>{if((null==t?void 0:t.status)==200){let t=a.map(a=>({...a,is_default:a.id===e}));E((0,x.o_)()),E((0,x.SH)(t))}}).catch(e=>{console.error(e)})},R=(0,i.useMemo)(()=>{var e,a;return(null==t?void 0:null===(e=t.refresh_token)||void 0===e?void 0:e.length)>15?"".concat(null==t?void 0:null===(a=t.refresh_token)||void 0===a?void 0:a.slice(0,40),"..."):(null==t?void 0:t.refresh_token)||"No token available"},[null==t?void 0:t.refresh_token]);return(0,n.jsxs)(o.A,{sx:{p:4,backgroundColor:e.palette.background.default,minHeight:"100vh"},children:[(0,n.jsx)(A.P.div,{initial:"hidden",animate:"visible",variants:C,transition:{duration:.5},children:(0,n.jsxs)(s.A,{sx:{p:3,mb:4},children:[(0,n.jsx)(l.A,{variant:"h6",children:"Active Organization"}),(0,n.jsx)(l.A,{variant:"body1",sx:{mb:2},children:null==t?void 0:t.name}),(0,n.jsx)(d.A,{container:!0,spacing:2,children:B.map((a,i)=>(0,n.jsx)(d.A,{size:4,children:(0,n.jsx)(s.A,{sx:{p:2,cursor:"pointer",backgroundColor:(null==t?void 0:t.name)===(null==a?void 0:a.name)?"var(--mui-palette-primary-main)":e.palette.background.paper,color:(null==t?void 0:t.name)===(null==a?void 0:a.name)?"#fff":e.palette.text.primary},onClick:()=>H(a.id),children:(0,n.jsx)(l.A,{align:"center",children:null==a?void 0:a.name})})},i))})]})}),(0,n.jsx)(A.P.div,{initial:"hidden",animate:"visible",variants:C,transition:{duration:.5,delay:.2},children:(0,n.jsxs)(s.A,{sx:{p:3,mb:4},children:[(0,n.jsx)(l.A,{variant:"h6",sx:{mb:2},children:"PDF Requests Trends"}),v&&w?(0,n.jsx)(c.A,{variant:"rectangular",height:300}):(0,n.jsx)(p.N1,{data:w,options:_})]})}),!v&&(0,n.jsx)(k,{currentOrg:t,token:T,page:F,pageSize:5,onPageChange:(e,a)=>{I(a)},readAllPdfTemplatePage:j.h1}),(0,n.jsx)(A.P.div,{initial:"hidden",animate:"visible",variants:C,transition:{duration:.5,delay:.6},children:(0,n.jsxs)(s.A,{sx:{mt:4,p:3},children:[(0,n.jsx)(l.A,{variant:"h6",children:"API Token"}),(0,n.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mt:2},children:[(0,n.jsx)(l.A,{variant:"body1",sx:{mr:2},children:R||"No token available"}),(0,n.jsx)(u.A,{title:S?"Copied!":"Copy",children:(0,n.jsx)(h.A,{onClick:()=>{navigator.clipboard.writeText("my_generated_token_12345").then(()=>{O(!0),setTimeout(()=>O(!1),2e3)})},children:S?(0,n.jsx)(g.A,{color:"success"}):(0,n.jsx)(m.A,{})})})]})]})})]})}},25033:(e,a,t)=>{"use strict";t.d(a,{n:()=>n});let n=t(82651).A.create({baseURL:"".concat("http://localhost:4000/api_/","v1"),timeout:3e4,headers:{"Content-Type":"application/json","Allow-Control-Allow-Origin":"*"}})},76487:(e,a,t)=>{"use strict";t.d(a,{AU:()=>o,EC:()=>r,lf:()=>s,xi:()=>i});var n=t(25033);let i=async(e,a)=>n.n.get("/organizations/"+e,{headers:{Authorization:"Bearer ".concat(a)}}),r=async(e,a)=>n.n.post("/organizations",e,{headers:{Authorization:"Bearer ".concat(a)}}),o=async(e,a)=>n.n.put("/organizations/"+e.id,e,{headers:{Authorization:"Bearer ".concat(a)}}),s=async(e,a)=>n.n.put("/organizations/"+e+"/default",{},{headers:{Authorization:"Bearer ".concat(a)}})},89262:(e,a,t)=>{"use strict";t.d(a,{KW:()=>d,TA:()=>i,Ue:()=>u,Vd:()=>s,Wv:()=>o,YC:()=>r,h1:()=>l,kH:()=>c});var n=t(25033);let i=async(e,a)=>n.n.post("/pdf-templates/resource",e,{headers:{Authorization:"Bearer ".concat(a)}}),r=async function(e,a,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return n.n.get("/pdf-templates/preview/"+e,{headers:{Authorization:"Bearer ".concat(t)},params:{organization_id:a,subcategoriesFilter:i}})},o=async(e,a)=>n.n.post("/pdf-templates/convert",e,{headers:{Authorization:"Bearer ".concat(a)}}),s=async(e,a)=>n.n.get("/pdf-templates/resource/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}}),l=async function(e,a){let{sortOrder:t="asc",startFrom:i=0,to:r=10,sortBy:o="name",addonsFilter:s="",search:l=""}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.n.get("/pdf-templates/template/page",{headers:{Authorization:"Bearer ".concat(a)},params:{sortOrder:t,startFrom:i,to:r,sortBy:o,addonsFilter:s,search:l,organization_id:e}})},d=async(e,a,t)=>n.n.put("/pdf-templates/resource/".concat(e),a,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),c=async(e,a,t)=>n.n.put("/pdf-templates/resource/dummy-data/".concat(e),{json:a},{headers:{Authorization:"Bearer ".concat(t)}}),u=async(e,a)=>n.n.delete("/pdf-templates/resource/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}})},90917:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>d,F3:()=>i,L_:()=>r,SH:()=>s,o_:()=>l,x5:()=>c});let n=(0,t(48943).Z0)({name:"organization",initialState:{organizations:[]},reducers:{addOrganizationAll(e,a){e.organizations=[...e.organizations,...a.payload]},addOrganization(e,a){e.organizations.push(a.payload)},updateOrganization(e,a){let t=e.organizations.findIndex(e=>e.id===a.payload.id);-1!==t&&(e.organizations[t]=a.payload)},removeOrganization(e,a){e.organizations=e.organizations.filter(e=>e.id!==a.payload)},clearOrganizationState(e){e.organizations=[]}}}),{addOrganization:i,updateOrganization:r,removeOrganization:o,addOrganizationAll:s,clearOrganizationState:l}=n.actions,d=n.reducer,c=e=>e.organizations.find(e=>e.is_default)||null}},e=>{var a=a=>e(e.s=a);e.O(0,[5647,3333,3391,943,1064,5948,8943,2651,3655,2926,451,8441,1517,7358],()=>a(13289)),_N_E=e.O()}]);
//# sourceMappingURL=page-c607da5a8b0f25ac.js.map