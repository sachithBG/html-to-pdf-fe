(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2408],{2924:(e,t,n)=>{Promise.resolve().then(n.bind(n,76963))},41266:e=>{!function(){"use strict";var t={864:function(e){var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise(function(n,r){var o;function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,a,{once:!0}),"error"!==t&&(o={once:!0},"function"==typeof e.on&&m(e,"error",i,o))})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=l(e))>0&&a.length>o&&!a.warned){a.warned=!0;var o,i,a,d=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,console&&console.warn&&console.warn(d)}return e}function c(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=c.bind(r);return o.listener=n,r.wrapFn=o,o}function u(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function o(i){r.once&&e.removeEventListener(t,o),n(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,s=Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else for(var d=l.length,c=f(l,d),n=0;n<d;++n)r(c[n],this,t);return!0},i.prototype.addListener=function(e,t){return d(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return d(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return u(this,e,!0)},i.prototype.rawListeners=function(e){return u(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,r),a=!1}finally{a&&delete n[e]}return i.exports}r.ab="//";var o=r(864);e.exports=o}()},76963:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var r=n(95155),o=n(12115),i=n(79329),a=n(9561),s=n(9552),l=n(26603),d=n(78562),c=n(24162),p=n(43655),u=n(39905),h=n(2241),f=n(68998),m=n(60615),v=n(99489),g=n(894),y=n(30562),x=n(97667),b=n(7495),w=n(51677),A=n(25033);let j=async(e,t,n)=>A.n.put("/profiles/".concat(e,"/name"),{name:t},{headers:{Authorization:"Bearer ".concat(n)}}),_=async(e,t,n)=>A.n.put("/profiles/".concat(e,"/theme"),{theme:t},{headers:{Authorization:"Bearer ".concat(n)}});var L=n(51900),C=n(83391),E=n(90175),k=n(84268),O=n(32731);let T=()=>{var e;let[t,n]=(0,o.useState)("light"),[A,T]=(0,o.useState)(null),[z,S]=(0,o.useState)(""),[N,P]=(0,o.useState)({}),[I,R]=(0,o.useState)(!1),[B,F]=(0,o.useState)(!1),[M,D]=(0,o.useState)(!1),[U,H]=(0,o.useState)({}),{token:W,user:q,status:Z}=(0,C.d4)(e=>e.session),$=(0,C.wA)(),{setMode:G}=(0,i.Ut)(),K="string"==typeof A&&(0,k.cH)(A)?A:A instanceof File?URL.createObjectURL(A):void 0,V=async e=>{n(e),F(!0),$((0,E.OD)(e)),G(e);try{await _(null==q?void 0:q.id,e,W),H(e=>({...e,theme:!0}))}catch(e){H(e=>({...e,theme:!1})),console.error(e)}finally{F(!1)}},X=async()=>{try{if(!z){P(e=>({...e,name:"Name is required"}));return}R(!0);let e=await j(null==q?void 0:q.id,z,W);(null==e?void 0:e.status)===200&&H(e=>({...e,name:!0}))}catch(e){H(e=>({...e,name:!1})),P(e=>({...e,name:"Error updating name"})),console.error(e)}finally{R(!1)}},Y=()=>{let e={};return z||(e.name="User name is required"),A||(e.avatar="Avatar is required"),P(e),0===Object.keys(e).length},J=async()=>{if(Y()){D(!0);try{let e=await (0,L.XO)(null==q?void 0:q.id,A,W);if(!(null==e?void 0:e.url)){P(e=>({...e,avatar:"Error uploading avatar"})),H(e=>({...e,avatar:!1}));return}H(e=>({...e,avatar:!0}))}catch(e){H(e=>({...e,avatar:!1})),P(e=>({...e,avatar:"Error updating avatar"})),console.error(e)}finally{D(!1)}}};return((0,o.useEffect)(()=>{var e,t,r,o;(null==q?void 0:q.name)&&S(null==q?void 0:q.name),(null==q?void 0:null===(e=q.profile)||void 0===e?void 0:e.theme)&&n(null==q?void 0:null===(r=q.profile)||void 0===r?void 0:r.theme),(null==q?void 0:null===(t=q.profile)||void 0===t?void 0:t.avatar)&&T(null==q?void 0:null===(o=q.profile)||void 0===o?void 0:o.avatar)},[null==q?void 0:q.name,null==q?void 0:null===(e=q.profile)||void 0===e?void 0:e.theme]),"loading"===Z)?(0,r.jsx)(a.A,{children:"Loading..."}):"unauthenticated"===Z?(0,r.jsxs)(s.A,{children:[(0,r.jsx)(a.A,{children:"Please sign in to view your profile."}),(0,r.jsx)(l.A,{variant:"outlined",size:"small",onClick:()=>O.y.emit("triggerSignIn"),children:"Sign In"})]}):(0,r.jsx)(s.A,{maxWidth:"sm",children:(0,r.jsxs)(d.A,{elevation:3,sx:{padding:3,marginTop:5},children:[(0,r.jsx)(a.A,{variant:"h4",gutterBottom:!0,children:"Profile Management"}),(0,r.jsxs)(c.A,{children:[(0,r.jsxs)(p.A,{container:!0,spacing:2,children:[(0,r.jsx)(p.A,{size:8,children:(0,r.jsx)(u.A,{label:"Name",value:z,onChange:e=>{S(e.target.value),P(e=>({...e,name:void 0})),H(e=>({...e,name:void 0}))},error:!!N.name,helperText:N.name,required:!0,fullWidth:!0,margin:"normal"})}),(0,r.jsx)(p.A,{size:4,sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(x.A,{variant:"outlined",color:"inherit",size:"small",onClick:X,loading:I,startIcon:!0===U.name?(0,r.jsx)(b.A,{color:"success"}):!1===U.name?(0,r.jsx)(w.A,{color:"error"}):null,children:"Update"})})]}),(0,r.jsx)(h.A,{sx:{margin:"16px 0"}}),(0,r.jsxs)(f.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(m.A,{control:(0,r.jsx)(v.A,{checked:"dark"===t,onChange:()=>V("dark"===t?"light":"dark")}),label:"Theme: ".concat(t)}),!0===U.theme&&(0,r.jsx)(b.A,{color:"success",sx:{ml:1}}),!1===U.theme&&(0,r.jsx)(w.A,{color:"error",sx:{ml:1}}),B&&(0,r.jsx)(a.A,{sx:{ml:1},children:"Loading..."})]}),(0,r.jsx)(h.A,{sx:{margin:"16px 0"}}),(0,r.jsx)("input",{accept:"image/*",type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&(T(e.target.files[0]),P(e=>({...e,avatar:void 0})),H(e=>({...e,theme:void 0})))},style:{display:"none"},id:"avatar-upload"}),(0,r.jsx)("label",{htmlFor:"avatar-upload",children:(0,r.jsx)(f.A,{sx:{display:"flex",justifyContent:"center",marginTop:2},children:(0,r.jsx)(g.A,{component:"span",children:(0,r.jsx)(y.A,{src:K,alt:"Profile Avatar",sx:{width:100,height:100},children:!A&&z.charAt(0)})})})}),N.avatar&&(0,r.jsx)(a.A,{color:"error",sx:{marginTop:1,textAlign:"center"},children:N.avatar}),(0,r.jsxs)(f.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:2},children:[(0,r.jsx)(a.A,{variant:"caption",color:"textSecondary",children:"Click on the avatar to upload a new one"}),!0===U.avatar&&(0,r.jsx)(b.A,{color:"success",sx:{ml:1}}),(0,r.jsx)(x.A,{variant:"outlined",size:"small",color:"primary",onClick:J,loading:M,sx:{marginTop:3},startIcon:!0===U.avatar?(0,r.jsx)(b.A,{color:"success"}):!1===U.avatar?(0,r.jsx)(w.A,{color:"error"}):null,children:"Update Profile Image"})]})]})]})})}},25033:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});let r=n(82651).A.create({baseURL:"".concat("http://localhost:4000/api_/","v1"),timeout:3e4,headers:{"Content-Type":"application/json","Allow-Control-Allow-Origin":"*"}})},51900:(e,t,n)=>{"use strict";n.d(t,{N0:()=>i,XO:()=>o,o7:()=>a,vL:()=>l,zM:()=>s});var r=n(25033);let o=async(e,t,n)=>{let o=new FormData;o.append("avatar",t);try{return(await r.n.put("/profiles/".concat(e,"/avatar"),o,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error uploading image:",e),e}},i=async(e,t,n)=>{let o=new FormData;o.append("logo",t);try{return(await r.n.post("/s3/upload/org/logo",o,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"multipart/form-data"},params:{organizationId:e}})).data}catch(e){throw console.error("Error uploading image:",e),e}},a=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,i=new FormData;return i.append("media",t),await r.n.post("/s3/media/upload",i,{headers:{Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"},params:{organization_id:e,addon_ids:n}})},s=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{return(await r.n.get("/media/organization/"+e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},params:{organizationId:e,addon_ids:n}})).data}catch(e){throw console.error("Error uploading image:",e),e}},l=async(e,t)=>r.n.delete("/s3/delete/img",{headers:{Authorization:"Bearer ".concat(t)},params:{fileKey:e}})},32731:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(41266);let o=new(n.n(r)())},84268:(e,t,n)=>{"use strict";n.d(t,{$3:()=>c,L9:()=>s,Wh:()=>d,Z_:()=>r,cH:()=>i,ll:()=>l,qG:()=>o});let r=["CONTENT","TABLE","IMAGE"],o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},i=e=>/^https:\/\/pdf-crafter2\.s3\.us-east-1\.amazonaws\.com\/.+$/.test(e),a="https://media.istockphoto.com/id/1967543722/photo/the-city-of-london-skyline-at-night-united-kingdom.jpg?s=2048x2048&w=is&k=20&c=ZMquw-lP_vrSVoUlSWjuWIZHdVma7z4ju9pD1EkRPvs=",s=' <div style="font-family: Arial, sans-serif; line-height: 1.5; margin: 0; padding: 0; text-align: center;text-align: center; width: 100%; border-top: 1px solid #ccc;">\n<div style="background-color: #f4f4f4; padding: 20px; ">\n      <img\n        src="'.concat(a,'"\n        alt="Logo"\n        style="display: block; margin: 0 auto; max-width: 100px;"\n      />\n      <h1 style="margin: 10px 0;font-size: 20px; color: #555;">Company Name</h1>\n      <p style="margin: 0; font-size: 14px; color: #555;">Your tagline or slogan here</p>\n    </div> </div>'),l='<div style="font-size: 10px; text-align: center; width: 100%;">\n<div\n      style="background-color: #f4f4f4; padding: 20px; text-align: center; font-size: 12px; color: #555;"\n    >\n      <p style="margin: 0;">123 Business Street, Business City, BC 12345</p>\n      <p style="margin: 0;">\n        Contact us: <a href="mailto:info@company.com" style="color: #007BFF;">info@company.com</a>\n      </p>\n      <p style="margin: 0;">&copy; 2024 Company Name. All rights reserved.</p>\n    </div></div>',d='<div style="padding: 20px;">\n      <h2 style="color: #333;">Welcome to Our Report</h2>\n      <p style="margin: 0 0 10px; color: #555;">\n        Below is a summary of our performance and goals. Feel free to review the details and let us know your thoughts.\n      </p>\n\n      \x3c!-- Image Example --\x3e\n      <div style="text-align: center; margin: 20px 0;">\n        <img\n          src="'.concat(a,'"\n          alt="Sample Chart"\n          style="max-width: 100%; height: auto;"\n        />\n      </div>\n\n      \x3c!-- Table Example --\x3e\n      <h3 style="color: #333;">Performance Overview</h3>\n      <table\n        style="width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px;"\n      >\n        <thead>\n          <tr style="background-color: #f4f4f4;">\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Metric</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Target</th>\n            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Achieved</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 8px;">Revenue</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">$1,000,000</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">$950,000</td>\n          </tr>\n          <tr style="background-color: #f9f9f9;">\n            <td style="border: 1px solid #ddd; padding: 8px;">Customer Growth</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">20%</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">18%</td>\n          </tr>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 8px;">Satisfaction Score</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">90%</td>\n            <td style="border: 1px solid #ddd; padding: 8px;">88%</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n'),c={initialColumns:3,initialRows:[{col1:"Data 1",col2:"Data 2",col3:"Data 3"}],initialStyles:Array.from({length:3},()=>({backgroundColor:"#f4f4f4",fontSize:"14",padding:"8px",color:"#000"})),customHtml:'<table style="width: 100%; border-collapse: collapse; margin: 20px 0;">\n                        <thead>\n                            <tr style="background-color: #007bff; color: #ffffff;">\n                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Header 1</th>\n                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Header 2</th>\n                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Header 3</th>\n                            </tr>\n                        </thead><tbody></tbody></table>'}},90175:(e,t,n)=>{"use strict";n.d(t,{OD:()=>o,ed:()=>r});let r=(0,n(48943).Z0)({name:"ToggleTheme",initialState:{theme:"light",matches:{matches_xs_up:!1,matches_sm_up:!1,matches_md_up:!1,matches_lg_up:!1,matches_sm_down:!1,matches_md_down:!1}},reducers:{toggleTheme(e,t){e.theme="dark"===t.payload?"light":"dark"},deviceMatches(e,t){e.matches={...e.matches,...t.payload}}}}),{toggleTheme:o,deviceMatches:i}=r.actions;r.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[3333,6603,3391,3894,943,1064,5948,8943,2651,1043,5589,3655,9905,6184,611,1543,2412,8441,1517,7358],()=>t(2924)),_N_E=e.O()}]);
//# sourceMappingURL=page-24359d4aa6c4e983.js.map