"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7558],{37558:(t,e,l)=>{l.r(e),l.d(e,{default:()=>S});var i=l(95155),a=l(12115),r=l(894),s=l(78416),n=l(36417),o=l(27753),c=l(68998),h=l(26603),d=l(39905),u=l(45704),x=l(26214),j=l(96854),f=l(71119),m=l(39742),A=l(6748),g=l(88333),v=l.n(g),y=l(89262),p=l(83391);let S=t=>{let{onSave:e,id:l}=t,[g,S]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),[C,J]=(0,a.useState)(null),[O,k]=(0,a.useState)(!1),[b,E]=(0,a.useState)(!1),{token:I}=(0,p.d4)(t=>t.session);(0,a.useEffect)(()=>{l&&g&&(E(!0),(async()=>{try{let t=await (0,y.Vd)(l,I);if(200==t.status){let{data:e}=t.data;if(null==e?void 0:e.json){let t=JSON.parse(e.json);N(JSON.stringify(t,null,2))}}}catch(t){console.error("Error fetching data for edit mode:",t)}finally{E(!1)}})())},[l,g]);let z=()=>{S(!1),N(""),J(null)},_=()=>{try{let t=new(v()),e=JSON.parse(w);if(!t.compile({})(e)||(null==w?void 0:w.trim())=="")throw Error("Invalid JSON structure.");return J(null),!0}catch(t){return J(t.message),!1}},D=async()=>{if(!C&&_())try{k(!0),await (0,y.kH)(l,w,I),setTimeout(()=>{e(w),k(!1),z()},1e3)}catch(t){J(null==t?void 0:t.message)}finally{k(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{color:"primary",onClick:()=>S(!0),"aria-label":"upload",children:(0,i.jsx)(f.A,{})}),(0,i.jsxs)(s.A,{open:g,onClose:z,maxWidth:"lg",fullWidth:!0,children:[(0,i.jsx)(n.A,{children:"Upload JSON Data"}),(0,i.jsx)(o.A,{children:b?(0,i.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mt:2},children:[(0,i.jsx)(u.A,{variant:"text",width:"90%",height:30}),(0,i.jsx)(u.A,{variant:"text",width:"90%",height:30}),(0,i.jsx)(u.A,{variant:"text",width:"90%",height:30}),(0,i.jsx)(u.A,{variant:"text",width:"90%",height:30}),(0,i.jsx)(u.A,{variant:"text",width:"90%",height:30}),(0,i.jsx)(u.A,{variant:"text",width:"90%",height:30})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{sx:{display:"flex",float:"right",justifyContent:"space-between",mt:2},children:(0,i.jsx)(h.A,{startIcon:(0,i.jsx)(m.A,{}),onClick:()=>{try{let t=JSON.stringify(JSON.parse(w),null,2);N(t),J(null)}catch(t){J("Invalid JSON. Please fix errors before formatting.")}},color:"secondary",variant:"outlined",size:"small",children:"Format JSON"})}),(0,i.jsx)(d.A,{label:"JSON Data",multiline:!0,rows:20,fullWidth:!0,variant:"outlined",value:w,onChange:t=>{N(t.target.value),J(null)},error:!!C,helperText:C||"",sx:{mt:2}})]})}),(0,i.jsxs)(x.A,{children:[(0,i.jsx)(h.A,{onClick:z,color:"inherit",size:"small",children:"Cancel"}),(0,i.jsx)(h.A,{onClick:D,color:"primary",variant:"outlined",disabled:O||!!C,startIcon:O?(0,i.jsx)(j.A,{size:20}):(0,i.jsx)(A.A,{}),size:"small",children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=7558.7a664324cf42f742.js.map