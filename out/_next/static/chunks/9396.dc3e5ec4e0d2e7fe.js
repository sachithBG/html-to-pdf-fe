"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9396],{10702:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(12983),n=r(95155);let i=(0,a.A)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},36924:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(12983),n=r(95155);let i=(0,a.A)((0,n.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")},64665:(e,t,r)=>{r.d(t,{A:()=>p});var a=r(12115),n=r(43463),i=r(7123),s=r(89142),o=r(12567),l=r(78562),d=r(81045),c=r(37157);function h(e){return(0,c.Ay)("MuiCard",e)}(0,d.A)("MuiCard",["root"]);var u=r(95155);let v=e=>{let{classes:t}=e;return(0,i.A)({root:["root"]},h,t)},y=(0,s.Ay)(l.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),p=a.forwardRef(function(e,t){let r=(0,o.b)({props:e,name:"MuiCard"}),{className:a,raised:i=!1,...s}=r,l={...r,raised:i},d=v(l);return(0,u.jsx)(y,{className:(0,n.A)(d.root,a),elevation:i?8:void 0,ref:t,ownerState:l,...s})})},11441:(e,t,r)=>{r.d(t,{A:()=>j});var a,n=r(12115),i=r(43463),s=r(7123),o=r(37410),l=r(9561),d=r(34484),c=r(2620),h=r(89142),u=r(98330),v=r(12567),y=r(81045),p=r(37157);function x(e){return(0,p.Ay)("MuiInputAdornment",e)}let A=(0,y.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var m=r(95155);let f=e=>{let{classes:t,disablePointerEvents:r,hiddenLabel:a,position:n,size:i,variant:l}=e,d={root:["root",r&&"disablePointerEvents",n&&"position".concat((0,o.A)(n)),l,a&&"hiddenLabel",i&&"size".concat((0,o.A)(i))]};return(0,s.A)(d,x,t)},k=(0,h.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t["position".concat((0,o.A)(r.position))],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})((0,u.A)(e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(A.positionStart,"&:not(.").concat(A.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}})),j=n.forwardRef(function(e,t){let r=(0,v.b)({props:e,name:"MuiInputAdornment"}),{children:s,className:o,component:h="div",disablePointerEvents:u=!1,disableTypography:y=!1,position:p,variant:x,...A}=r,j=(0,c.A)()||{},b=x;x&&j.variant,j&&!b&&(b=j.variant);let z={...r,hiddenLabel:j.hiddenLabel,size:j.size,disablePointerEvents:u,position:p,variant:b},g=f(z);return(0,m.jsx)(d.A.Provider,{value:null,children:(0,m.jsx)(k,{as:h,ownerState:z,className:(0,i.A)(g.root,o),ref:t,...A,children:"string"!=typeof s||y?(0,m.jsxs)(n.Fragment,{children:["start"===p?a||(a=(0,m.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,s]}):(0,m.jsx)(l.A,{color:"textSecondary",children:s})})})})},89396:(e,t,r)=>{r.r(t),r.d(t,{default:()=>z});var a=r(95155),n=r(12115),i=r(68998),s=r(39905),o=r(11441),l=r(72926),d=r(26603),c=r(96854),h=r(45704),u=r(64665),v=r(9561),y=r(894);let p=(0,r(12983).A)((0,a.jsx)("path",{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H9V4h9zM3 15v-2h2v2zm0-5.5h2v2H3zM10 20h2v2h-2zm-7-1.5v-2h2v2zM5 22c-1.1 0-2-.9-2-2h2zm3.5 0h-2v-2h2zm5 0v-2h2c0 1.1-.9 2-2 2M5 6v2H3c0-1.1.9-2 2-2"}),"CopyAll");var x=r(52842),A=r(36924),m=r(10702),f=r(7831),k=r(77711),j=r(83391);let b=(0,k.default)(()=>Promise.all([r.e(7057),r.e(1071)]).then(r.bind(r,93452)),{loadableGenerated:{webpack:()=>[93452]},ssr:!1}),z=e=>{let{addonId:t}=e,[r,k]=(0,n.useState)({id:void 0,key:""}),[z,g]=(0,n.useState)([]),[E,w]=(0,n.useState)(!1),[C,M]=(0,n.useState)(!1),[S,K]=(0,n.useState)(""),{token:_}=(0,j.d4)(e=>e.session),{enqueueSnackbar:N}=(0,f.dh)(),P=async()=>{if(!r.key||""===r.key.trim()){K("External Key is required.");return}K(""),M(!0);try{let e=r.id?await (0,x.MC)(r.id,{addon_id:t,key_value:r.key},_):await (0,x.KV)(t,r.key,_);(201==e.status||200==e.status)&&(N("External Key copied: ".concat(r.key),{variant:"success"}),k({id:void 0,key:""}),g(t=>[...t,e.data]))}catch(e){console.error("Error creating external key:",e),N("Failed to create External Key",{variant:"error"})}finally{M(!1)}},R=e=>{navigator.clipboard.writeText(e),N("External Key copied: ".concat(e),{variant:"success"})},H=async e=>{if(e)try{await (0,x.iW)(e,_),N("Key deleted successfully.",{variant:"success"}),L()}catch(e){console.error("Error deleting key:",e),N("Failed to delete the key. Please try again.",{variant:"error"})}},L=async()=>{w(!0),g([]);try{let e=await (0,x.$_)(t,_);200==e.status&&g(e.data)}catch(e){console.error("Error fetching external keys:",e)}finally{w(!1)}};return(0,n.useEffect)(()=>{t&&L()},[t]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(i.A,{className:"pt-4",children:[(0,a.jsx)(s.A,{label:"Create External Key",variant:"outlined",value:r.key,onChange:e=>{k(t=>({...t,key:e.target.value})),K("")},fullWidth:!0,size:"small",error:!!S,helperText:S,disabled:C,slotProps:{input:{endAdornment:(0,a.jsxs)(o.A,{position:"end",children:[(null==r?void 0:r.key)&&(0,a.jsx)(m.A,{fontSize:"small",sx:{cursor:"pointer"},onClick:()=>k({id:void 0,key:""})}),(0,a.jsx)(l.A,{title:"Type/Status refers to the identifier used by external systems to categorize templates (e.g., invoice, report). This helps external systems recognize and interact with the template uniquely.",arrow:!0,children:(0,a.jsx)(A.A,{fontSize:"small",sx:{cursor:"pointer"}})})]})}}}),(0,a.jsx)("div",{className:"flex justify-end mt-3",children:(0,a.jsx)(d.A,{variant:"contained",color:"primary",onClick:P,disabled:C,size:"small",children:C?(0,a.jsx)(c.A,{size:24,color:"inherit"}):r.id?"Update Key":"Create Key"})})]}),E?(0,a.jsx)(h.A,{variant:"text",width:"100%",height:40}):(null==z?void 0:z.length)>0&&(0,a.jsxs)(u.A,{className:"p-4",children:[(0,a.jsx)(v.A,{variant:"h6",className:"mb-2",children:"Existing External Keys"}),(0,a.jsx)("div",{children:null==z?void 0:z.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)(v.A,{sx:{cursor:"pointer"},onClick:()=>k({id:e.id,key:e.key_value}),children:e.key_value}),(0,a.jsxs)(i.A,{children:[(0,a.jsx)(l.A,{title:"Copy Key",children:(0,a.jsx)(y.A,{onClick:()=>R(e.key_value),children:(0,a.jsx)(p,{})})}),(0,a.jsx)(l.A,{title:"Delete Key",children:(0,a.jsx)(b,{id:e.id,onDelete:e=>H(e),variant:"icon",buttonProps:{size:"small",color:"error"}})})]})]},t))})]})]})}},52842:(e,t,r)=>{r.d(t,{$_:()=>o,KV:()=>n,MC:()=>i,iW:()=>s});var a=r(25033);let n=async(e,t,r)=>a.n.post("/external-keys",{addon_id:e,key_value:t},{headers:{Authorization:"Bearer ".concat(r)}}),i=async(e,t,r)=>a.n.put("/external-keys/".concat(e),t,{headers:{Authorization:"Bearer ".concat(r)}}),s=async(e,t)=>a.n.delete("/external-keys/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),o=async(e,t)=>a.n.get("/external-keys/by-addon/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})}}]);
//# sourceMappingURL=9396.dc3e5ec4e0d2e7fe.js.map